#!/bin/bash

#
# Copyright (C) 2023 Nethesis S.r.l.
# SPDX-License-Identifier: GPL-3.0-or-later
#

# helper to trigger users task. we need two arguments

action=${1:-}
localuser=${2:-}

if [[ "$action" == 'start' ]];then
    /usr/bin/podman exec -d imapsync /usr/local/bin/syncctl start "$localuser"
elif [[ "$action" == 'restart' ]];then
    /usr/bin/podman exec -d imapsync /usr/local/bin/syncctl stop "$localuser"
    /usr/bin/podman exec -d imapsync /usr/local/bin/syncctl start "$localuser"
elif [[ "$action" == 'stop' ]];then
    /usr/bin/podman exec imapsync /usr/local/bin/syncctl stop "$localuser"
fi
